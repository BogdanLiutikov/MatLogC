import java.util.HashMap;

public class MP{

    static HashMap hm = new HashMap<String, Node>();
    public static boolean isMp(Node tree) {

        for (Object o: hm.values())
        {
            if (o instanceof BinOp)
            {
                BinOp binOp = (BinOp) o;
                if (binOp.op.equals("->") && binOp.right.toString().equals(tree.toString())){
                    if (hm.containsKey(binOp.left.toString()))
                    {
                        mp(binOp.left, binOp.right);
                        hm.put(tree.toString(), tree);
                        return true;
                    }
                }
            }
        }
        hm.put(tree.toString(), tree);
//        System.out.println(hm.toString());
        return false;
    }

    static void mp(Node a, Node b)
    {
        String s = ("(!b->((a->b)->!b)) \n" +
                "(!b->(a->!b)) \n" +
                "((!b->(a->!b))->(!b->(!b->(a->!b)))) \n" +
                "(!b->(!b->(a->!b))) \n" +
                "((!b->(a->!b))->((a->b)->(!b->(a->!b)))) \n" +
                "(((!b->(a->!b))->((a->b)->(!b->(a->!b))))->(!b->((!b->(a->!b))->((a->b)->(!b->(a->!b)))))) \n" +
                "(!b->((!b->(a->!b))->((a->b)->(!b->(a->!b))))) \n" +
                "((!b->(!b->(a->!b)))->((!b->((!b->(a->!b))->((a->b)->(!b->(a->!b)))))->(!b->((a->b)->(!b->(a->!b)))))) \n" +
                "((!b->((!b->(a->!b))->((a->b)->(!b->(a->!b)))))->(!b->((a->b)->(!b->(a->!b))))) \n" +
                "(!b->((a->b)->(!b->(a->!b)))) \n" +
                "(((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))) \n" +
                "((((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b))))->(!b->(((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))))) \n" +
                "(!b->(((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b))))) \n" +
                "((!b->((a->b)->!b))->((!b->(((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))))->(!b->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))))) \n" +
                "((!b->(((a->b)->!b)->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))))->(!b->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b))))) \n" +
                "(!b->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b)))) \n" +
                "((!b->((a->b)->(!b->(a->!b))))->((!b->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b))))->(!b->((a->b)->(a->!b))))) \n" +
                "((!b->(((a->b)->(!b->(a->!b)))->((a->b)->(a->!b))))->(!b->((a->b)->(a->!b)))) \n" +
                "(!b->((a->b)->(a->!b))) \n" +
                "((a->b)->((a->!b)->!a)) \n" +
                "(((a->b)->((a->!b)->!a))->(!b->((a->b)->((a->!b)->!a)))) \n" +
                "(!b->((a->b)->((a->!b)->!a))) \n" +
                "(((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a))) \n" +
                "((((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a)))->(!b->(((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a))))) \n" +
                "(!b->(((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a)))) \n" +
                "((!b->((a->b)->(a->!b)))->((!b->(((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a))))->(!b->(((a->b)->((a->!b)->!a))->((a->b)->!a))))) \n" +
                "((!b->(((a->b)->(a->!b))->(((a->b)->((a->!b)->!a))->((a->b)->!a))))->(!b->(((a->b)->((a->!b)->!a))->((a->b)->!a)))) \n" +
                "(!b->(((a->b)->((a->!b)->!a))->((a->b)->!a))) \n" +
                "((!b->((a->b)->((a->!b)->!a)))->((!b->(((a->b)->((a->!b)->!a))->((a->b)->!a)))->(!b->((a->b)->!a)))) \n" +
                "((!b->(((a->b)->((a->!b)->!a))->((a->b)->!a)))->(!b->((a->b)->!a))) \n" +
                "(!b->((a->b)->!a)) \n" +
                "!!a \n" +
                "(!!a->(!b->!!a)) \n" +
                "(!b->!!a) \n" +
                "(!!a->((a->b)->!!a)) \n" +
                "((!!a->((a->b)->!!a))->(!b->(!!a->((a->b)->!!a)))) \n" +
                "(!b->(!!a->((a->b)->!!a))) \n" +
                "((!b->!!a)->((!b->(!!a->((a->b)->!!a)))->(!b->((a->b)->!!a)))) \n" +
                "((!b->(!!a->((a->b)->!!a)))->(!b->((a->b)->!!a))) \n" +
                "(!b->((a->b)->!!a)) \n" +
                "(!a->(!!a->!(a->b))) \n" +
                "((!a->(!!a->!(a->b)))->(!b->(!a->(!!a->!(a->b))))) \n" +
                "(!b->(!a->(!!a->!(a->b)))) \n" +
                "((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b))))) \n" +
                "(((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b)))))->(!b->((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b))))))) \n" +
                "(!b->((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b)))))) \n" +
                "((!b->(!a->(!!a->!(a->b))))->((!b->((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b))))))->(!b->((a->b)->(!a->(!!a->!(a->b))))))) \n" +
                "((!b->((!a->(!!a->!(a->b)))->((a->b)->(!a->(!!a->!(a->b))))))->(!b->((a->b)->(!a->(!!a->!(a->b)))))) \n" +
                "(!b->((a->b)->(!a->(!!a->!(a->b))))) \n" +
                "(((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))) \n" +
                "((((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b)))))->(!b->(((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))))) \n" +
                "(!b->(((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b)))))) \n" +
                "((!b->((a->b)->!a))->((!b->(((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))))->(!b->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))))) \n" +
                "((!b->(((a->b)->!a)->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))))->(!b->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b)))))) \n" +
                "(!b->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b))))) \n" +
                "((!b->((a->b)->(!a->(!!a->!(a->b)))))->((!b->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b)))))->(!b->((a->b)->(!!a->!(a->b)))))) \n" +
                "((!b->(((a->b)->(!a->(!!a->!(a->b))))->((a->b)->(!!a->!(a->b)))))->(!b->((a->b)->(!!a->!(a->b))))) \n" +
                "(!b->((a->b)->(!!a->!(a->b)))) \n" +
                "(((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))) \n" +
                "((((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b))))->(!b->(((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))))) \n" +
                "(!b->(((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b))))) \n" +
                "((!b->((a->b)->!!a))->((!b->(((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))))->(!b->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))))) \n" +
                "((!b->(((a->b)->!!a)->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))))->(!b->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b))))) \n" +
                "(!b->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b)))) \n" +
                "((!b->((a->b)->(!!a->!(a->b))))->((!b->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b))))->(!b->((a->b)->!(a->b))))) \n" +
                "((!b->(((a->b)->(!!a->!(a->b)))->((a->b)->!(a->b))))->(!b->((a->b)->!(a->b)))) \n" +
                "(!b->((a->b)->!(a->b))) \n" +
                "!!(a->b) \n" +
                "(!!(a->b)->(!b->!!(a->b))) \n" +
                "(!b->!!(a->b)) \n" +
                "(!!(a->b)->((a->b)->!!(a->b))) \n" +
                "((!!(a->b)->((a->b)->!!(a->b)))->(!b->(!!(a->b)->((a->b)->!!(a->b))))) \n" +
                "(!b->(!!(a->b)->((a->b)->!!(a->b)))) \n" +
                "((!b->!!(a->b))->((!b->(!!(a->b)->((a->b)->!!(a->b))))->(!b->((a->b)->!!(a->b))))) \n" +
                "((!b->(!!(a->b)->((a->b)->!!(a->b))))->(!b->((a->b)->!!(a->b)))) \n" +
                "(!b->((a->b)->!!(a->b))) \n" +
                "(((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b))) \n" +
                "((((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b)))->(!b->(((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b))))) \n" +
                "(!b->(((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b)))) \n" +
                "((!b->((a->b)->!(a->b)))->((!b->(((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b))))->(!b->(((a->b)->!!(a->b))->!(a->b))))) \n" +
                "((!b->(((a->b)->!(a->b))->(((a->b)->!!(a->b))->!(a->b))))->(!b->(((a->b)->!!(a->b))->!(a->b)))) \n" +
                "(!b->(((a->b)->!!(a->b))->!(a->b))) \n" +
                "((!b->((a->b)->!!(a->b)))->((!b->(((a->b)->!!(a->b))->!(a->b)))->(!b->!(a->b)))) \n" +
                "((!b->(((a->b)->!!(a->b))->!(a->b)))->(!b->!(a->b))) \n" +
                "(!b->!(a->b)) \n" +
                "(!(a->b)->(!!(a->b)->!a)) \n" +
                "((!(a->b)->(!!(a->b)->!a))->(!b->(!(a->b)->(!!(a->b)->!a)))) \n" +
                "(!b->(!(a->b)->(!!(a->b)->!a))) \n" +
                "((!b->!(a->b))->((!b->(!(a->b)->(!!(a->b)->!a)))->(!b->(!!(a->b)->!a)))) \n" +
                "((!b->(!(a->b)->(!!(a->b)->!a)))->(!b->(!!(a->b)->!a))) \n" +
                "(!b->(!!(a->b)->!a)) \n" +
                "((!b->!!(a->b))->((!b->(!!(a->b)->!a))->(!b->!a))) \n" +
                "((!b->(!!(a->b)->!a))->(!b->!a)) \n" +
                "(!b->!a) \n" +
                "((!b->!a)->((!b->!!a)->!!b)) \n" +
                "((!b->!!a)->!!b) \n" +
                "!!b").replaceAll("a", a.toString()).replaceAll("b", b.toString());

        System.out.println(s);
    }
}
